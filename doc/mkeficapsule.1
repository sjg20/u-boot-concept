.TH MAEFICAPSULE 1 "May 2021"

.SH NAME
mkeficapsule \- Generate EFI capsule file for U-Boot

.SH SYNOPSIS
.B mkeficapsule
.RB [\fIoptions\fP] " \fIimage-blob\fP \fIcapsule-file\fP"

.SH "DESCRIPTION"
The
\fBmkeficapsule\fP
command is used to create an EFI capsule file for use with the U-Boot
EFI capsule update.
A capsule file may contain various type of firmware blobs which
are to be applied to the system and must be placed in the specific
directory on the UEFI system partition. An update will be automatically
executed at next reboot.

Optionally, a capsule file can be signed with a given private key.
In this case, the update will be authenticated by verifying the signature
before applying.

\fBmkeficapsule\fP takes any type of image files, including:
.TP
.I raw image
format is a single binary blob of any type of firmware.

.TP
.I FIT (Flattened Image Tree) image
format
is the same as used in the new \fIuImage\fP format and allows for
multiple binary blobs in a single capsule file.
This type of image file can be generated by \fBmkimage\fP.

.PP
If you want to use other types than above two, you should explicitly
specify a guid for the FMP driver.

.SH "OPTIONS"
One of \fB--fit\fP, \fB--raw\fP or \fB--guid\fP option must be specified.

.TP
.BI "-f, --fit
Indicate that the blob is a FIT image file

.TP
.BI "-r, --raw
Indicate that the blob is a raw image file

.TP
.BI "-g, --guid \fIguid-string\fP"
Specify guid for image blob type. The format is:
    xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

The first three elements are in little endian, while the rest
is in big endian.

.TP
.BI "-i, --index \fIindex\fP"
Specify an image index

.TP
.BI "-I, --instance \fIinstance\fP"
Specify a hardware instance

.TP
.BI "-h, --help"
Print a help message

.TP 0
.B With signing:

\fB--private-key\fP, \fB--certificate\fP and \fB--monotonic-count\fP are
all mandatory.

.TP
.BI "-p, --private-key \fIprivate-key-file\fP"
Specify signer's private key file in PEM

.TP
.BI "-c, --certificate \fIcertificate-file\fP"
Specify signer's certificate file in EFI certificate list format

.TP
.BI "-m, --monotonic-count \fIcount\fP"
Specify a monotonic count which is set to be monotonically incremented
at every firmware update.

.TP
.BI "-d, --dump_sig"
Dump signature data into *.p7 file

.PP
.SH FILES
.TP
.BI "\fI/EFI/UpdateCapsule\fP"
The directory in which all capsule files be placed

.SH SEE ALSO
.B mkimage

.SH AUTHORS
Written by AKASHI Takahiro <takahiro.akashi@linaro.org>

.SH HOMEPAGE
http://www.denx.de/wiki/U-Boot/WebHome
